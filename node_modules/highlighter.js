(function ($) {
    
    var highlighter = "#FFFBCC"; // highlight color
    var regex_hashtag = new RegExp("#[a-zA-Z0-9_]+"); // simple regular expression for hashtags

    // detects input event on elements with contenteditable attribute 
    $.fn.highlight = function() {
        $('*[contentEditable="true"]').on('input', function(){ // detect input in contenteditables
            if (regex_hashtag.test($(this).html()) == true) { // if hash tag is present
                $(this).css("background-color", highlighter); // change background
            } 
        })
    }

    /*detects dynamically created elements that are children of 'div' and have class '.editable' 
    and assigns the highlight function to them*/
    $('div').on('input', $('.editable'), function() {
        $(this).highlight();
    });
}(jQuery));
